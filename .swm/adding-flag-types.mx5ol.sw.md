---
id: mx5ol
name: Adding Flag Types
file_version: 1.0.2
app_version: 0.10.1-2
file_blobs:
  flags/flags.go: b13db0923126b1a8d63312a611140bac1200d70f
  goat.go: 31207983ab5cfebe7ab79d65ed931e5050afb959
---

For every type we use in our Goat functions (invoked with `Run`[<sup id="ZlCxof">â†“</sup>](#f-ZlCxof)), we need to have a matching flag type.<br/>
The flag type allows Goat to properly parse and handle the input from the CLI.

## Registering a Flag Type

To add a flag type, we need to register it's handler. This is done using `RegisterTypeHandler`[<sup id="l1Uxz">â†“</sup>](#f-l1Uxz) as follows:

<br/>

<br/>

<br/>
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ flags/flags.go
```go
ðŸŸ© 77     	RegisterTypeHandler[int](&typeHandlerImpl{
ðŸŸ© 78     		makeFlag: func(name, usage string, defaultValue any) Flag {
ðŸŸ© 79     			if defaultValue == nil {
ðŸŸ© 80     				return flags.RequiredIntFlag{Name: name, Usage: usage}
ðŸŸ© 81     			}
ðŸŸ© 82     			return flags.DefaultIntFlag{
ðŸŸ© 83     				Name:    name,
ðŸŸ© 84     				Usage:   usage,
ðŸŸ© 85     				Default: tryCast[int](defaultValue),
ðŸŸ© 86     			}
ðŸŸ© 87     		},
ðŸŸ© 88     		getFlag: func(c *cli.Context, name string) any {
ðŸŸ© 89     			return c.Int(name)
ðŸŸ© 90     		},
ðŸŸ© 91     	})
```

<br/>

With `int`[<sup id="Zs7ru2">â†“</sup>](#f-Zs7ru2) being the type we want to handle.

The argument passed to `RegisterTypeHandler`[<sup id="1bBjyu">â†“</sup>](#f-1bBjyu) must be implement the `TypeHandler`[<sup id="Z2ahExo">â†“</sup>](#f-Z2ahExo) interface:

<br/>

<br/>

<br/>
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ flags/flags.go
```go
â¬œ 33     //
â¬œ 34     // MakeFlag creates a flag based on its description.
â¬œ 35     // GetFlag gets the value of a flag.
ðŸŸ© 36     type TypeHandler interface {
ðŸŸ© 37     	MakeFlag(name, usage string, defaultValue any) Flag
ðŸŸ© 38     	GetFlag(c *cli.Context, name string) any
ðŸŸ© 39     }
```

<br/>

The `GetFlag`[<sup id="Z1cpu0u">â†“</sup>](#f-Z1cpu0u) function should fetch the value of the flag from the CLI app:

<br/>

<br/>
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ flags/flags.go
```go
ðŸŸ© 88     		getFlag: func(c *cli.Context, name string) any {
ðŸŸ© 89     			return c.Int(name)
ðŸŸ© 90     		},
```

<br/>

Whiel the `MakeFlag`[<sup id="NWxAl">â†“</sup>](#f-NWxAl) should instantiate a struct representing the flag:

<br/>

<br/>
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ flags/flags.go
```go
ðŸŸ© 78     		makeFlag: func(name, usage string, defaultValue any) Flag {
ðŸŸ© 79     			if defaultValue == nil {
ðŸŸ© 80     				return flags.RequiredIntFlag{Name: name, Usage: usage}
ðŸŸ© 81     			}
ðŸŸ© 82     			return flags.DefaultIntFlag{
ðŸŸ© 83     				Name:    name,
ðŸŸ© 84     				Usage:   usage,
ðŸŸ© 85     				Default: tryCast[int](defaultValue),
ðŸŸ© 86     			}
ðŸŸ© 87     		},
```

<br/>

<br/>

<br/>

<br/>

<!-- THIS IS AN AUTOGENERATED SECTION. DO NOT EDIT THIS SECTION DIRECTLY -->
### Swimm Note

<span id="f-Z1cpu0u">GetFlag</span>[^](#Z1cpu0u) - "flags/flags.go" L38
```go
	GetFlag(c *cli.Context, name string) any
```

<span id="f-Zs7ru2">int</span>[^](#Zs7ru2) - "flags/flags.go" L77
```go
	RegisterTypeHandler[int](&typeHandlerImpl{
```

<span id="f-NWxAl">MakeFlag</span>[^](#NWxAl) - "flags/flags.go" L37
```go
	MakeFlag(name, usage string, defaultValue any) Flag
```

<span id="f-l1Uxz">RegisterTypeHandler</span>[^](#l1Uxz) - "flags/flags.go" L53
```go
func RegisterTypeHandler[T any](handler TypeHandler) {
```

<span id="f-1bBjyu">RegisterTypeHandler</span>[^](#1bBjyu) - "flags/flags.go" L77
```go
	RegisterTypeHandler[int](&typeHandlerImpl{
```

<span id="f-ZlCxof">Run</span>[^](#ZlCxof) - "goat.go" L69
```go
func Run(f any) {
```

<span id="f-Z2ahExo">TypeHandler</span>[^](#Z2ahExo) - "flags/flags.go" L36
```go
type TypeHandler interface {
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBZ29hdCUzQSUzQXRtcjIzMg==/docs/mx5ol).