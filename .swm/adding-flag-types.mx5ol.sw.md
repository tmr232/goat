---
id: mx5ol
name: Adding Flag Types
file_version: 1.0.2
app_version: 0.10.1-2
file_blobs:
  flags/flags.go: 5eb6c934dfbb3e96950a2288bf2c9d7a27527a98
  goat.go: 31207983ab5cfebe7ab79d65ed931e5050afb959
---

For every type we use in our Goat functions (invoked with `Run`[<sup id="ZlCxof">â†“</sup>](#f-ZlCxof), we need to have a matching flag type.<br/>
The flag type allows Goat to properly parse and handle the input from the CLI.

## Registering a Flag Type

To add a flag type, we need to register it's handler. This is done using `RegisterTypeHandler`[<sup id="1Odvym">â†“</sup>](#f-1Odvym) as follows:

<br/>

<br/>

<br/>
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ğŸ“„ flags/flags.go
```go
ğŸŸ© 60     	RegisterTypeHandler[int](&typeHandlerImpl{
ğŸŸ© 61     		makeFlag: func(name, usage string, defaultValue any) cli.Flag {
ğŸŸ© 62     			if defaultValue == nil {
ğŸŸ© 63     				return &cli.IntFlag{
ğŸŸ© 64     					Name:     name,
ğŸŸ© 65     					Usage:    usage,
ğŸŸ© 66     					Required: true,
ğŸŸ© 67     				}
ğŸŸ© 68     			}
ğŸŸ© 69     			return &cli.IntFlag{
ğŸŸ© 70     				Name:  name,
ğŸŸ© 71     				Usage: usage,
ğŸŸ© 72     				Value: tryCast[int](defaultValue),
ğŸŸ© 73     			}
ğŸŸ© 74     		},
ğŸŸ© 75     		getFlag: func(c *cli.Context, name string) any {
ğŸŸ© 76     			return c.Int(name)
ğŸŸ© 77     		},
ğŸŸ© 78     	})
```

<br/>

With `int`[<sup id="Z2b1c20">â†“</sup>](#f-Z2b1c20) being the type we want to handle.

The argument passed to `RegisterTypeHandler`[<sup id="ZwhpXt">â†“</sup>](#f-ZwhpXt) must be implement the `TypeHandler`[<sup id="ZG64wB">â†“</sup>](#f-ZG64wB) interface:

<br/>

<br/>

<br/>
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ğŸ“„ flags/flags.go
```go
ğŸŸ© 19     type TypeHandler interface {
ğŸŸ© 20     	MakeFlag(name, usage string, defaultValue any) cli.Flag
ğŸŸ© 21     	GetFlag(c *cli.Context, name string) any
ğŸŸ© 22     }
```

<br/>

The `GetFlag`[<sup id="29RTgt">â†“</sup>](#f-29RTgt) function should fetch the value of the flag from the CLI app:

<br/>

<br/>
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ğŸ“„ flags/flags.go
```go
ğŸŸ© 75     		getFlag: func(c *cli.Context, name string) any {
ğŸŸ© 76     			return c.Int(name)
ğŸŸ© 77     		},
```

<br/>

While the `MakeFlag`[<sup id="ZSVbVC">â†“</sup>](#f-ZSVbVC) return a valid `cli.Flag`[<sup id="ZrPB9l">â†“</sup>](#f-ZrPB9l):

<br/>

<br/>
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ğŸ“„ flags/flags.go
```go
ğŸŸ© 61     		makeFlag: func(name, usage string, defaultValue any) cli.Flag {
ğŸŸ© 62     			if defaultValue == nil {
ğŸŸ© 63     				return &cli.IntFlag{
ğŸŸ© 64     					Name:     name,
ğŸŸ© 65     					Usage:    usage,
ğŸŸ© 66     					Required: true,
ğŸŸ© 67     				}
ğŸŸ© 68     			}
ğŸŸ© 69     			return &cli.IntFlag{
ğŸŸ© 70     				Name:  name,
ğŸŸ© 71     				Usage: usage,
ğŸŸ© 72     				Value: tryCast[int](defaultValue),
ğŸŸ© 73     			}
ğŸŸ© 74     		},
```

<br/>

<br/>

<br/>

<!-- THIS IS AN AUTOGENERATED SECTION. DO NOT EDIT THIS SECTION DIRECTLY -->
### Swimm Note

<span id="f-ZrPB9l">cli.Flag</span>[^](#ZrPB9l) - "flags/flags.go" L20
```go
	MakeFlag(name, usage string, defaultValue any) cli.Flag
```

<span id="f-29RTgt">GetFlag</span>[^](#29RTgt) - "flags/flags.go" L21
```go
	GetFlag(c *cli.Context, name string) any
```

<span id="f-Z2b1c20">int</span>[^](#Z2b1c20) - "flags/flags.go" L60
```go
	RegisterTypeHandler[int](&typeHandlerImpl{
```

<span id="f-ZSVbVC">MakeFlag</span>[^](#ZSVbVC) - "flags/flags.go" L20
```go
	MakeFlag(name, usage string, defaultValue any) cli.Flag
```

<span id="f-1Odvym">RegisterTypeHandler</span>[^](#1Odvym) - "flags/flags.go" L36
```go
func RegisterTypeHandler[T any](handler TypeHandler) {
```

<span id="f-ZwhpXt">RegisterTypeHandler</span>[^](#ZwhpXt) - "flags/flags.go" L60
```go
	RegisterTypeHandler[int](&typeHandlerImpl{
```

<span id="f-ZlCxof">Run</span>[^](#ZlCxof) - "goat.go" L69
```go
func Run(f any) {
```

<span id="f-ZG64wB">TypeHandler</span>[^](#ZG64wB) - "flags/flags.go" L19
```go
type TypeHandler interface {
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBZ29hdCUzQSUzQXRtcjIzMg==/docs/mx5ol).